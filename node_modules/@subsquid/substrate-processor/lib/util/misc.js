"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.withErrorContext = exports.addErrorContext = exports.timeInterval = exports.unique = void 0;
function unique(items) {
    let set = new Set(items);
    return Array.from(set);
}
exports.unique = unique;
function timeInterval(seconds) {
    if (seconds < 60) {
        return Math.round(seconds) + 's';
    }
    let minutes = Math.ceil(seconds / 60);
    if (minutes < 60) {
        return minutes + 'm';
    }
    let hours = Math.floor(minutes / 60);
    minutes = minutes - hours * 60;
    return hours + 'h ' + minutes + 'm';
}
exports.timeInterval = timeInterval;
function addErrorContext(err, ctx) {
    let e = err;
    for (let key in ctx) {
        switch (key) {
            case 'blockHeight':
            case 'blockHash':
                if (e.blockHeight == null && e.blockHash == null) {
                    e.blockHeight = ctx.blockHeight;
                    e.blockHash = ctx.blockHash;
                }
                break;
            default:
                if (e[key] == null) {
                    e[key] = ctx[key];
                }
        }
    }
    return err;
}
exports.addErrorContext = addErrorContext;
function withErrorContext(ctx) {
    return function (err) {
        throw addErrorContext(err, ctx);
    };
}
exports.withErrorContext = withErrorContext;
//# sourceMappingURL=misc.js.map